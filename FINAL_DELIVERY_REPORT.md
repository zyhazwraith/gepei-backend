# åœ°é™ªåº”ç”¨å…¨æ ˆé¡¹ç›®äº¤ä»˜æŠ¥å‘Š

**é¡¹ç›®åç§°**: gepei-backend (åœ°é™ªåº”ç”¨å…¨æ ˆé¡¹ç›®)  
**GitHubä»“åº“**: https://github.com/zyhazwraith/gepei-backend  
**äº¤ä»˜æ—¥æœŸ**: 2026-01-19  
**ç‰ˆæœ¬**: v1.0.0

---

## ğŸ“¦ äº¤ä»˜å†…å®¹

### 1. é¡¹ç›®æ¶æ„

**Monorepoå…¨æ ˆä¸€ä½“åŒ–æ¶æ„**ï¼š
```
gepei-backend/
â”œâ”€â”€ server/              # Expressåç«¯ï¼ˆTypeScriptï¼‰
â”‚   â”œâ”€â”€ controllers/     # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ models/          # æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ routes/          # è·¯ç”±å±‚
â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ types/           # ç±»å‹å®šä¹‰
â”œâ”€â”€ client/              # Reactå‰ç«¯ï¼ˆTypeScript + Tailwind CSSï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/       # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/  # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ contexts/    # React Context
â”‚   â”‚   â”œâ”€â”€ lib/         # APIå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ utils/       # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ public/          # é™æ€èµ„æº
â”œâ”€â”€ shared/              # å‰åç«¯å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ errorCodes.ts    # é”™è¯¯ç å®šä¹‰
â”‚   â””â”€â”€ types.ts         # å…±äº«ç±»å‹
â”œâ”€â”€ database/            # æ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ init.sql         # åˆå§‹åŒ–è„šæœ¬ï¼ˆ9ä¸ªè¡¨ï¼‰
â””â”€â”€ package.json         # ç»Ÿä¸€çš„ä¾èµ–ç®¡ç†
```

### 2. æŠ€æœ¯æ ˆ

**åç«¯**:
- Node.js + Express.js 4.x
- TypeScript 5.9
- MySQL 8.0+
- JWTè®¤è¯
- bcryptå¯†ç åŠ å¯†

**å‰ç«¯**:
- React 19
- TypeScript 5.9
- Tailwind CSS 4.x
- Axios
- Wouterï¼ˆè·¯ç”±ï¼‰
- shadcn/uiç»„ä»¶åº“

**æ•°æ®åº“**:
- MySQL 8.0+
- 9ä¸ªè¡¨çš„å®Œæ•´æ•°æ®åº“è®¾è®¡

---

## âœ… å·²å®ŒæˆåŠŸèƒ½ç‚¹

### FP-001: é¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒé…ç½®
- âœ… é¡¹ç›®ç»“æ„æ­å»º
- âœ… TypeScripté…ç½®
- âœ… æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
- âœ… Expressåº”ç”¨åŸºç¡€
- âœ… å¯åŠ¨è„šæœ¬é…ç½®

### FP-002: ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
- âœ… API: `POST /api/v1/auth/register`
- âœ… æ‰‹æœºå·æ ¼å¼éªŒè¯ï¼ˆ11ä½ä¸­å›½å¤§é™†æ‰‹æœºå·ï¼‰
- âœ… å¯†ç å¼ºåº¦éªŒè¯ï¼ˆ8-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰
- âœ… æ‰‹æœºå·å”¯ä¸€æ€§æ£€æŸ¥
- âœ… å¯†ç åŠ å¯†å­˜å‚¨ï¼ˆbcrypt 12è½®ï¼‰
- âœ… è‡ªåŠ¨ç”ŸæˆJWT Token
- âœ… å‰ç«¯æ³¨å†Œé¡µé¢é›†æˆ

### FP-003: ç”¨æˆ·ç™»å½•åŠŸèƒ½
- âœ… API: `POST /api/v1/auth/login`
- âœ… æ‰‹æœºå·+å¯†ç éªŒè¯
- âœ… bcryptå¯†ç æ¯”å¯¹
- âœ… ç™»å½•æˆåŠŸè¿”å›JWT Token
- âœ… ç»Ÿä¸€çš„é”™è¯¯æç¤º
- âœ… å‰ç«¯ç™»å½•é¡µé¢é›†æˆ

### FP-004: è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
- âœ… API: `GET /api/v1/auth/me`
- âœ… JWT TokenéªŒè¯ä¸­é—´ä»¶
- âœ… è¿”å›ç”¨æˆ·å®Œæ•´ä¿¡æ¯
- âœ… Tokenè¿‡æœŸå’Œæ— æ•ˆå¤„ç†
- âœ… å‰ç«¯è®¤è¯Contexté›†æˆ

### æ¶æ„é‡æ„
- âœ… é¡¹ç›®ç»“æ„è°ƒæ•´ï¼ˆsrc/ â†’ server/ï¼Œæ·»åŠ client/å’Œshared/ï¼‰
- âœ… APIå“åº”æ ¼å¼ç»Ÿä¸€ï¼š`{code, message, data}`
- âœ… é”™è¯¯ç æ•°å­—åŒ–ï¼ˆ1001, 1002ç­‰ï¼‰
- âœ… APIè·¯å¾„ç‰ˆæœ¬åŒ–ï¼ˆ/v1ï¼‰
- âœ… å¯†ç éªŒè¯è§„åˆ™æ›´æ–°ï¼ˆ8-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰
- âœ… æ•°æ®åº“å­—æ®µä¸‹åˆ’çº¿å‘½å

### å‰ç«¯é›†æˆ
- âœ… å‰ç«¯ä»£ç é›†æˆåˆ°client/ç›®å½•
- âœ… axios APIå®¢æˆ·ç«¯é…ç½®
- âœ… Tokenå­˜å‚¨å’Œç®¡ç†
- âœ… è®¤è¯Contextï¼ˆAuthContextï¼‰
- âœ… æ³¨å†Œå’Œç™»å½•é¡µé¢APIè°ƒç”¨
- âœ… viteä»£ç†é…ç½®
- âœ… ESæ¨¡å—å¯¼å…¥è·¯å¾„ä¿®å¤

---

## ğŸ¯ APIæ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- **Base URL**: `http://localhost:3000/api/v1`
- **è®¤è¯æ–¹å¼**: Bearer Tokenï¼ˆJWTï¼‰
- **Content-Type**: `application/json`

### å“åº”æ ¼å¼

**æˆåŠŸå“åº”**:
```json
{
  "code": 0,
  "message": "success",
  "data": { ... }
}
```

**é”™è¯¯å“åº”**:
```json
{
  "code": 1001,
  "message": "é”™è¯¯æè¿°"
}
```

### APIç«¯ç‚¹

#### 1. ç”¨æˆ·æ³¨å†Œ
```http
POST /api/v1/auth/register
Content-Type: application/json

{
  "phone": "13912345678",
  "password": "Test1234",
  "nickname": "æµ‹è¯•ç”¨æˆ·"
}
```

**æˆåŠŸå“åº”**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "user_id": 1,
    "phone": "13912345678",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "is_guide": 0
  }
}
```

**é”™è¯¯ç **:
- `1001`: è¯¥æ‰‹æœºå·å·²æ³¨å†Œ
- `1005`: æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®
- `1006`: å¯†ç æ ¼å¼ä¸æ­£ç¡®

#### 2. ç”¨æˆ·ç™»å½•
```http
POST /api/v1/auth/login
Content-Type: application/json

{
  "phone": "13912345678",
  "password": "Test1234"
}
```

**æˆåŠŸå“åº”**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "user_id": 1,
    "phone": "13912345678",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "is_guide": 0
  }
}
```

**é”™è¯¯ç **:
- `1002`: æ‰‹æœºå·æˆ–å¯†ç é”™è¯¯

#### 3. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```http
GET /api/v1/auth/me
Authorization: Bearer <token>
```

**æˆåŠŸå“åº”**:
```json
{
  "code": 0,
  "message": "success",
  "data": {
    "user_id": 1,
    "phone": "13912345678",
    "nickname": "æµ‹è¯•ç”¨æˆ·",
    "avatar_url": "",
    "role": "user",
    "is_guide": 0,
    "balance": "0.00"
  }
}
```

**é”™è¯¯ç **:
- `1003`: Tokenç¼ºå¤±
- `1004`: Tokenæ— æ•ˆ

---

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### å·²åˆ›å»ºçš„è¡¨

1. **users** - ç”¨æˆ·è¡¨
2. **guides** - åœ°é™ªä¿¡æ¯è¡¨
3. **orders** - è®¢å•è¡¨
4. **payments** - æ”¯ä»˜è®°å½•è¡¨
5. **withdrawals** - æç°è®°å½•è¡¨
6. **custom_requirements** - å®šåˆ¶éœ€æ±‚è¡¨
7. **custom_order_candidates** - å®šåˆ¶è®¢å•å€™é€‰è¡¨
8. **reviews** - è¯„ä»·è¡¨
9. **admin_logs** - ç®¡ç†å‘˜æ“ä½œæ—¥å¿—è¡¨

### æ•°æ®åº“é…ç½®
- **æ•°æ®åº“å**: `gepei_db`
- **å­—ç¬¦é›†**: `utf8mb4`
- **æ’åºè§„åˆ™**: `utf8mb4_unicode_ci`

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- MySQL 8.0+
- npm æˆ– pnpm

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/zyhazwraith/gepei-backend.git
cd gepei-backend
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®æ•°æ®åº“**
```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p < database/init.sql
```

4. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# ä¿®æ”¹server/config/database.tsä¸­çš„æ•°æ®åº“é…ç½®
# ä¿®æ”¹server/utils/jwt.tsä¸­çš„JWTå¯†é’¥
```

5. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**
```bash
# å¯åŠ¨åç«¯
npm run dev:server

# å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
npm run dev:client
```

6. **è®¿é—®åº”ç”¨**
- å‰ç«¯: http://localhost:5173
- åç«¯API: http://localhost:3000/api/v1

### ç”Ÿäº§éƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
```bash
npm run build
```

2. **å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨**
```bash
npm run start
```

---

## ğŸ“Š æµ‹è¯•ç»“æœ

### åç«¯APIæµ‹è¯•
- âœ… ç”¨æˆ·æ³¨å†ŒAPI - é€šè¿‡
- âœ… ç”¨æˆ·ç™»å½•API - é€šè¿‡
- âœ… è·å–ç”¨æˆ·ä¿¡æ¯API - é€šè¿‡
- âœ… TokenéªŒè¯ - é€šè¿‡
- âœ… é”™è¯¯å¤„ç† - é€šè¿‡

### æµ‹è¯•è¦†ç›–
- æ³¨å†ŒåŠŸèƒ½ï¼šæ‰‹æœºå·éªŒè¯ã€å¯†ç éªŒè¯ã€é‡å¤æ³¨å†Œæ£€æŸ¥
- ç™»å½•åŠŸèƒ½ï¼šå¯†ç éªŒè¯ã€é”™è¯¯æç¤º
- è®¤è¯åŠŸèƒ½ï¼šTokenç”Ÿæˆã€TokenéªŒè¯ã€Tokenè¿‡æœŸå¤„ç†

---

## ğŸ“ Gitæäº¤è®°å½•

```
* 99f5747 (main) feat: å‰ç«¯é›†æˆå®Œæˆ
* d6f62de feat: æ¶æ„é‡æ„å®Œæˆ
* 8099cb1 Merge branch 'feature/FP-001' into main
* 01ad507 fix: ä¿®å¤JWTç±»å‹é”™è¯¯
* ae8039c feat(FP-001): é¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒé…ç½®
* c7060ec feat(FP-002): ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
* <commit> feat(FP-003): ç”¨æˆ·ç™»å½•åŠŸèƒ½
* <commit> feat(FP-004): è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

æ ¹æ®åŠŸèƒ½ç‚¹å¼€å‘ä»»åŠ¡æ–‡æ¡£ï¼Œå»ºè®®ç»§ç»­å¼€å‘ï¼š

### FP-005: åœ°é™ªè®¤è¯
- éªŒè¯èº«ä»½è¯ä¿¡æ¯
- æäº¤åœ°é™ªèµ„æ–™
- åˆ›å»ºguidesè®°å½•
- æ›´æ–°usersè¡¨is_guideå­—æ®µ

### FP-006: åœ°é™ªèµ„æ–™ç¼–è¾‘
- ç¼–è¾‘åœ°é™ªä¸ªäººä¿¡æ¯
- ä¸Šä¼ ç…§ç‰‡
- è®¾ç½®æœåŠ¡åŒºåŸŸå’Œè¯­è¨€

### FP-007: åœ°é™ªåˆ—è¡¨æŸ¥è¯¢
- æŒ‰åŸå¸‚ç­›é€‰
- æŒ‰è¯­è¨€ç­›é€‰
- æŒ‰ä»·æ ¼æ’åº
- åˆ†é¡µæŸ¥è¯¢

---

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub**: https://github.com/zyhazwraith/gepei-backend
- **æŠ€æœ¯æ ˆ**: TypeScript + Express + React + MySQL

---

## ğŸ“„ é™„ä»¶

1. [æŠ€æœ¯æ¶æ„æ–‡æ¡£](docs/gepei_tech_docs_final/01_æŠ€æœ¯æ¶æ„è®¾è®¡_V1.0.md)
2. [æ•°æ®åº“è®¾è®¡æ–‡æ¡£](docs/gepei_tech_docs_final/02_æ•°æ®åº“è®¾è®¡_V1.1.md)
3. [APIè®¾è®¡æ–‡æ¡£](docs/gepei_tech_docs_final/03_APIè®¾è®¡_V1.2.md)
4. [åŠŸèƒ½ç‚¹å¼€å‘ä»»åŠ¡](docs/gepei_tech_docs_final/04_åŠŸèƒ½ç‚¹å¼€å‘ä»»åŠ¡_V1.1.md)

---

**äº¤ä»˜å®Œæˆæ—¥æœŸ**: 2026-01-19  
**é¡¹ç›®çŠ¶æ€**: âœ… FP-001~FP-004 å·²å®Œæˆå¹¶æµ‹è¯•é€šè¿‡
