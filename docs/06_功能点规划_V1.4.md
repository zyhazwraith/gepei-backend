# 陪你App - 功能点规划 V1.4 (Draft)

**状态**: 规划中  
**日期**: 2026-01-21  
**版本**: V1.4

---

## 0. 紧急修复 (Critical Fixes)
> 优先解决影响核心流程的 Bug。

| ID | 修复项 | 问题描述 | 优先级 |
| :--- | :--- | :--- | :--- |
| BUG-001 | 首页及交互报错 | 用户反馈访问主页及大量点击操作时会报错，需排查前端路由、API 响应或资源加载问题。 | **P0** |

## 1. 核心体验优化 (Experience Optimization)
> 针对 V1.3 版本中发现的体验问题进行打磨。

| ID | 优化项 | 问题描述 | 预期效果 | 优先级 |
| :--- | :--- | :--- | :--- | :--- |
| OPT-001 | (待补充) | | | |

## 2. 新功能特性 (New Features)
> 拓展业务边界，增强平台价值。

| ID | 功能名称 | 需求描述 | 价值/目标 | 优先级 |
| :--- | :--- | :--- | :--- | :--- |
| FEAT-001 | 定制单撮合流程升级 | **现状**: 管理员直接指派单一地陪。<br>**新需求**: 管理员筛选推荐(至多5人) -> 用户从候选列表中反选确认。 | 提升用户自主权，增加撮合成功率。 | **P0** |
| FEAT-002 | LBS 地理位置服务 | **现状**: 仅有城市字段。<br>**新需求**: 记录地陪经纬度；展示地陪与用户的距离；基于距离推荐。 | 提升匹配精准度，满足"附近"找人需求。 | **P1** |
| FEAT-003 | 微信支付接入 | **现状**: 仅为模拟支付。<br>**新需求**: 评估并接入真实微信支付功能。 | 完成商业闭环，验证资金流。 | **P1** |

## 3. 技术债务清理 (Technical Debt)
> 提升系统稳定性、安全性和可维护性。

| ID | 任务项 | 现状/问题 | 改进方案 | 优先级 |
| :--- | :--- | :--- | :--- | :--- |
| TECH-001 | (待补充) | | | |

---

## 4. 详细需求分析 (Detailed Analysis)

### 4.1 [FEAT-001] 定制单撮合流程升级
- **背景**: 之前的 MVP 流程过于简化，用户无法选择心仪的地陪。
- **流程**: 
  1. 用户发布定制单 (Pending)。
  2. 管理员后台筛选候选人，加入 `Candidate List` (Max 5)。
  3. 订单状态变更为 `Selection Pending` (待用户选择)。
  4. 用户查看候选人列表，点击"确认选择"。
  5. 订单状态变更为 `Waiting for Service` (待服务)。

### 4.2 [FEAT-002] LBS 地理位置服务
- **数据层**: User/Guide 表增加 `latitude`, `longitude` 字段。
- **功能层**: 
  - 地陪端：上报/更新位置。
  - 用户端：计算并显示"距离您 xx km"。
  - 列表页：增加"按距离排序"。

### 4.3 [FEAT-003] 微信支付接入
- **前提**: 需要企业资质申请微信支付商户号 (MVP阶段可能受限)。
- **替代方案**: 如果无法申请商户号，可考虑使用沙箱环境或继续优化模拟支付体验（如模拟扫码界面）。
