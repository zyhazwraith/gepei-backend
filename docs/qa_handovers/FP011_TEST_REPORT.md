# FP011 ç®¡ç†å‘˜ç™»å½• (Admin Login) è½¬æµ‹æŠ¥å‘Š

## 1. åŠŸèƒ½æ¦‚è¿°
æœ¬åŠŸèƒ½å®ç°äº†ç®¡ç†å‘˜çš„èº«ä»½éªŒè¯å’Œæƒé™æ§åˆ¶ã€‚ç³»ç»Ÿé€šè¿‡ JWT Token ä¸­çš„ `role: 'admin'` å­—æ®µåŒºåˆ†ç®¡ç†å‘˜ä¸æ™®é€šç”¨æˆ·ï¼Œå¹¶æä¾›äº†åå°è·¯ç”±å®ˆå« (Frontend) å’Œä¸­é—´ä»¶æ‹¦æˆª (Backend) åŒé‡ä¿éšœã€‚

## 2. å˜æ›´èŒƒå›´
### åç«¯
- **éªŒè¯æœºåˆ¶**: é€šç”¨ç™»å½•æ¥å£ `/api/v1/auth/login` æ”¯æŒè¿”å› `role` å­—æ®µã€‚
- **æƒé™ä¸­é—´ä»¶**: `requireAdmin` ä¸­é—´ä»¶éªŒè¯ `req.user.role === 'admin'`ã€‚
- **æ•°æ®åˆå§‹åŒ–**: æä¾›äº† `scripts/create-admin.ts` è„šæœ¬ç”¨äºåˆ›å»º/é‡ç½®ç®¡ç†å‘˜è´¦å·ã€‚

### å‰ç«¯
- **ç™»å½•é¡µé¢**: `client/src/pages/admin/Login.tsx`
  - ç‹¬ç«‹çš„åå°ç™»å½•ç•Œé¢ã€‚
  - ç™»å½•åæ ¡éªŒè§’è‰²æƒé™ï¼Œéç®¡ç†å‘˜è´¦å·ä¼šè¢«æ‹¦æˆªå¹¶æç¤ºã€‚
- **è·¯ç”±å®ˆå«**: `AdminLayout.tsx` ç¡®ä¿åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—® `/admin/*` ä¸‹çš„è·¯ç”±ã€‚

## 3. æµ‹è¯•ç»“æœ

### 3.1 è‡ªåŠ¨åŒ–æµ‹è¯•
ä½¿ç”¨è„šæœ¬ `scripts/test-admin-login.ts` éªŒè¯æƒé™é€»è¾‘ã€‚

**æµ‹è¯•ç”¨ä¾‹**:
1. **ç®¡ç†å‘˜ç™»å½•** -> **é€šè¿‡**
   - ä½¿ç”¨è´¦å· `19999999999` / `AdminPassword123` ç™»å½•æˆåŠŸã€‚
   - éªŒè¯ Token æœ‰æ•ˆæ€§åŠ `role` å­—æ®µã€‚
2. **ç®¡ç†å‘˜è®¿é—®å—ä¿æŠ¤æ¥å£** -> **é€šè¿‡**
   - ä½¿ç”¨ç®¡ç†å‘˜ Token è®¿é—® `/admin/users` æˆåŠŸã€‚
3. **æ™®é€šç”¨æˆ·è®¿é—®å—ä¿æŠ¤æ¥å£** -> **é€šè¿‡**
   - åˆ›å»ºæ™®é€šç”¨æˆ·å¹¶è·å– Tokenã€‚
   - å°è¯•è®¿é—® `/admin/users`ï¼Œè¢«æœåŠ¡å™¨æ‹’ç» (403 Forbidden)ã€‚

**æµ‹è¯•æ—¥å¿—**:
```
ğŸš€ Starting FP-011 Admin Login & RBAC Tests...

âœ… [PASS] Admin Login Successful (Role: admin)
âœ… [PASS] Admin Access to Protected Route (/admin/users) Successful
âœ… [PASS] Created Normal User: 13443608639
âœ… [PASS] RBAC Check Passed (Normal user correctly rejected with 403)

âœ¨ FP-011 Tests Completed.
```

## 4. éƒ¨ç½²è¯´æ˜
- **ç®¡ç†å‘˜è´¦å·**: é¦–æ¬¡éƒ¨ç½²éœ€è¿è¡Œ `npx tsx scripts/create-admin.ts` åˆå§‹åŒ–ç®¡ç†å‘˜è´¦å·ã€‚
- **é»˜è®¤å‡­æ®**:
  - è´¦å·: `19999999999`
  - å¯†ç : `AdminPassword123` (å»ºè®®é¦–æ¬¡ç™»å½•åä¿®æ”¹)

## 5. é—ç•™é—®é¢˜
- æ— ã€‚
