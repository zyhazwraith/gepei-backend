# FP005 地陪展示与搜索 (Guide Discovery) 转测报告

**项目名称**: Gepei Backend  
**版本**: Feature/FP-005  
**日期**: 2026-01-19  
**提交人**: 开发团队

---

## 1. 功能概述 (Feature Overview)
本版本新增了地陪展示与搜索功能，支持用户在未登录状态下浏览地陪列表，并根据城市或关键词进行筛选。

**主要功能点**:
1.  **地陪列表 API**: 公开接口 `GET /api/v1/guides`。
2.  **前端列表页**: 展示地陪头像、姓名、价格、标签等信息。
3.  **筛选与搜索**: 支持按热门城市筛选，或按姓名/简介关键词搜索。

---

## 2. API 变更 (API Changes)
| 接口 | 方法 | 描述 | 鉴权 | 参数 |
| :--- | :--- | :--- | :--- | :--- |
| `/api/v1/guides` | GET | 获取地陪列表 | **否** (公开) | `page`, `page_size`, `city`, `keyword` |

**响应示例**:
```json
{
  "code": 0,
  "data": {
    "list": [
      {
        "id": 1,
        "name": "张三",
        "city": "北京",
        "hourly_price": 200,
        "tags": ["历史", "美食"]
      }
    ],
    "pagination": {
      "total": 1,
      "page": 1,
      "page_size": 20
    }
  }
}
```

---

## 3. 自测结果 (Self-Test Results)
开发人员已完成以下自测：

### 3.1 后端自测
- [x] **无参请求**: 成功返回最新地陪列表。
- [x] **分页参数**: `page=1&page_size=5` 正常生效。
- [x] **筛选参数**: `city=Beijing` 正常过滤。
- [x] **搜索参数**: `keyword=Test Intro` 正常过滤。
- [x] **隐私保护**: 确认接口**未返回**地陪的身份证号。
- [x] **资料回显**: 认证后调用 `/guides/profile` 成功返回完整资料。

### 3.2 前端自测
- [x] **加载状态**: 进入页面显示骨架屏，加载完成后显示列表。
- [x] **城市筛选**: 点击"北京"等热门城市标签，列表自动刷新。
- [x] **关键词搜索**: 输入关键词回车，列表按相关性过滤。
- [x] **空状态**: 无数据时显示占位图。

---

## 4. 建议测试范围 (Scope for QA)
建议测试团队重点关注以下场景：

1.  **搜索边界**:
    - 输入特殊字符或超长关键词。
    - 搜索不存在的城市或人名。
2.  **数据一致性**:
    - 新注册并认证通过的地陪，是否立即出现在列表中。
    - 未认证通过的地陪，是否**不会**出现在列表中（目前逻辑是只要有记录就查，需确认业务逻辑）。
3.  **分页逻辑**:
    - 数据量超过一页时的翻页表现（目前前端仅实现了简单的无限滚动或分页逻辑雏形，需验证）。
4.  **图片加载**:
    - 地陪未上传照片时，默认头像是否显示正常。

---

## 5. 部署说明
1.  拉取 `feature/FP-005-guide-discovery` 分支。
2.  后端无需执行数据库迁移（无 Schema 变更）。
3.  重启后端服务。
